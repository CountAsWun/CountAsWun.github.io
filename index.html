<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>One Piece TCG – 10-Round Opponent Simulator</title>
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #111825;
      --panel-2: #0f1623;
      --text: #e8eef6;
      --muted: #9fb3c8;
      --accent: #6ea8fe;
      --accent-2: #8b5cf6;
      --ok: #00d18f;
      --bad: #ff5d7a;
      --warn: #ffb454;
      --border: #1e293b;
      --chip: #1b2433;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #0b0f14, #0a1220 60%, #0d1322);
      color: var(--text);
    }
    header {
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: saturate(140%) blur(6px);
      background: linear-gradient(180deg, #0a1324cc, #0a132480);
      border-bottom: 1px solid var(--border);
    }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 18px 20px; }
    h1 { margin: 0 0 6px; font-size: 1.35rem; letter-spacing: 0.2px; }
    .muted { color: var(--muted); font-size: 0.95rem; }

    .controls {
      display: grid; grid-template-columns: repeat(12, 1fr); gap: 10px; align-items: center; margin-top: 12px;
    }
    .panel {
      background: radial-gradient(1200px 400px at -5% -10%, #152034 0%, #0f1626 45%, #0b101b 100%);
      border: 1px solid var(--border);
      box-shadow: 0 6px 30px rgba(0,0,0,0.35);
      border-radius: 16px; padding: 14px 16px;
    }
    label { font-size: 0.85rem; color: var(--muted); display: block; margin-bottom: 6px; }
    input[type="number"], input[type="text"], select {
      width: 100%;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      padding: 10px 12px;
      outline: none;
    }
    input[type="range"] { width: 100%; }
    .checkbox-line { display:flex; gap:10px; align-items:center; }
    .checkbox-line input { width:auto; accent-color:#5e8df3; }
    .btn {
      appearance: none; border: 1px solid transparent; border-radius: 12px; padding: 10px 14px; font-weight: 600;
      color: white; cursor: pointer; transition: transform .05s ease, box-shadow .2s ease; 
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 10px 24px rgba(110,168,254,0.28);
    }
    .btn:hover { transform: translateY(-1px); }
    .btn.secondary { background: #1b2437; border-color: #2a3a56; box-shadow: none; color: var(--text); }

    .chips { display: flex; gap: 8px; flex-wrap: wrap; }
    .chip { background: var(--chip); border: 1px solid var(--border); padding: 6px 10px; border-radius: 999px; font-size: 0.8rem; color: var(--muted); }

    table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
    th, td { text-align: left; padding: 10px 10px; border-bottom: 1px solid var(--border); vertical-align: middle; }
    thead th { position: sticky; top: 0; background: linear-gradient(180deg, #0a1324, #0c1424); z-index: 1; border-bottom: 1px solid #203049; }

    .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 14px; align-items: start; margin: 16px 0; }

    .tag { font-weight: 700; font-size: 0.82rem; padding: 2px 8px; border-radius: 7px; }
    .tag.ok { background: #002f25; border: 1px solid #024c3d; color: #7be3c5; }
    .tag.bad { background: #300818; border: 1px solid #5a0c2a; color: #ffa6b6; }
    .rank { color: #cfd9ff; font-weight: 700; }

    .leader { display: flex; align-items: center; gap: 10px; }
    .leader img { width: 32px; height: 32px; border-radius: 6px; border: 1px solid #2a3a56; object-fit: cover; }
    .leader small { color: var(--muted); font-size: 0.8rem; }

    .footer-note { color: var(--muted); font-size: 0.85rem; }
    .pill { padding: 2px 6px; border-radius: 6px; background: #162033; border: 1px solid #2a3a56; color: #cfe2ff; font-size: 0.78rem; }

    .flex { display: flex; gap: 8px; align-items: center; }
    .hr { border: 0; height: 1px; background: var(--border); margin: 12px 0; }
    .tests { font-family: ui-monospace, Menlo, Consolas, monospace; font-size: .85rem; background: #0c1422; border: 1px solid var(--border); border-radius: 10px; padding: 10px; }
    .pass { color: #8ef8c5; }
    .fail { color: #ff93a6; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>One Piece TCG – 10‑Round Opponent Simulator v0.4</h1>
      <div class="muted">Weighted by current play rates you pasted below. Each round also rolls a d6 to decide <span class="pill">First/Second</span>.</div>
      <div class="controls">
        <div class="panel" style="grid-column: span 3">
          <label for="rounds">Rounds</label>
          <input id="rounds" type="number" min="1" max="20" value="10">
        </div>
        <div class="panel" style="grid-column: span 4">
          <label for="myLeader">Your Leader (optional, for mirror tag)</label>
          <input id="myLeader" type="text" placeholder="e.g., [OP12-020] Roronoa Zoro">
        </div>
        <div class="panel" style="grid-column: span 2">
          <label for="prefStart">Preferred dice roll</label>
          <select id="prefStart">
            <option value="First">First</option>
            <option value="Second">Second</option>
          </select>
        </div>
        <div class="panel" style="grid-column: span 3">
          <label>&nbsp;</label>
          <button class="btn" id="btnSim">Simulate Tournament</button>
        </div>
        <!--
        <div class="panel" style="grid-column: span 2">
          <label>&nbsp;</label>
          <button class="btn secondary" id="btnCsv">Export CSV</button>
        </div>
        -->
        <div class="panel" style="grid-column: span 6">
          <label>Options</label>
          <div class="checkbox-line" style="margin-bottom:8px">
            <input id="phaseOut" type="checkbox" />
            <span class="muted">Phase out Rogues</span>
          </div>
          <div>
            <div class="flex" style="justify-content:space-between; margin-bottom:6px">
              <label for="phaseSlider" style="margin:0">Phase exponent (α)</label>
              <span class="pill" id="phaseValue">α = 1.25</span>
            </div>
            <!-- Slider now limits α between 1.05 and 1.50, default 1.25 -->
            <input id="phaseSlider" type="range" min="1.05" max="1.5" step="0.01" value="1.25" />
            <div class="muted" style="font-size:0.8rem; margin-top:4px">Late‑round α target. Early rounds ease up from 1.00 → α using a smooth curve.</div>
          </div>
        </div>
        <div class="panel" style="grid-column: span 12">
          <details>
            <summary class="muted">Self‑Tests (click to expand)</summary>
            <div style="margin-top:10px">
              <button class="btn secondary" id="btnTests" type="button">Run Self‑Tests</button>
              <div id="testResults" class="tests" style="margin-top:10px"></div>
            </div>
          </details>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <section class="panel">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px">
          <h2 style="margin:0; font-size:1.05rem">Pairings</h2>
          <div class="chips" id="summaryChips"></div>
        </div>
        <div style="overflow:auto; max-height: 65vh; border-radius: 10px;">
          <table id="resultTable">
            <thead>
              <tr>
                <th style="width:70px">Round</th>
                <th>Opponent Leader</th>
                <th style="width:90px">Rank</th>
                <th style="width:120px">Play Rate</th>
                <th style="width:110px">Die</th>
                <th style="width:120px">You</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <aside class="panel">
        <h3 style="margin:0 0 8px">How it works</h3>
        <ul class="muted" style="margin:0 0 12px 16px; line-height:1.5">
          <li>Parses your leader table (hidden below) and extracts <strong>Leader</strong>, <strong>Rank</strong>, and <strong>Play Rate</strong>.</li>
          <li>Opponents are sampled using a weighted random draw proportional to Play Rate.</li>
          <li>A d6 is rolled per round. <span class="pill">Odd (1,3,5) = your Preferred</span>, <span class="pill">Even (2,4,6) = opposite</span>.</li>
          <li>If you fill in <em>Your Leader</em>, mirror matches are tagged.</li>
        </ul>
        <div class="footer-note">Tip: tweak rounds and rerun as much as you like.</div>
      </aside>
    </div>

    <!-- Hidden: your pasted data table -->
    <template id="dataTableTemplate">
      <!-- BEGIN USER DATA TABLE -->
      <table class="stats-table"><thead><tr><th>Rank </th><th>Δ </th><th>Card</th><th>Leader</th><th>Wtd WR ↓</th><th>Raw WR </th><th>Play Rate </th><th>Wins </th><th>Games </th></tr></thead><tbody><tr><td>1</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP07-019?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP07/OP07-019.png" alt="OP07-019" class="leader-icon-ranking"></a></td><td>[OP07-019] Jewelry Bonney</td><td>52.43%</td><td>53.93%</td><td>7.36%</td><td>10,544</td><td>19,551</td></tr><tr><td>2</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP12-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP12/OP12-001.png" alt="OP12-001" class="leader-icon-ranking"></a></td><td>[OP12-001] Silvers Rayleigh</td><td>52.42%</td><td>53.86%</td><td>7.66%</td><td>10,962</td><td>20,353</td></tr><tr><td>3</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP11-040?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP11/OP11-040.png" alt="OP11-040" class="leader-icon-ranking"></a></td><td>[OP11-040] Monkey.D.Luffy</td><td>51.39%</td><td>52.05%</td><td>15.36%</td><td>21,236</td><td>40,798</td></tr><tr><td>4</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP05-098?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP05/OP05-098.png" alt="OP05-098" class="leader-icon-ranking"></a></td><td>[OP05-098] Enel</td><td>50.71%</td><td>53.27%</td><td>3.74%</td><td>5,287</td><td>9,925</td></tr><tr><td>5</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP12-020?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP12/OP12-020.png" alt="OP12-020" class="leader-icon-ranking"></a></td><td>[OP12-020] Roronoa Zoro</td><td>50.50%</td><td>51.23%</td><td>12.75%</td><td>17,346</td><td>33,858</td></tr><tr><td>6</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/EB02-010?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/EB02/EB02-010.png" alt="EB02-010" class="leader-icon-ranking"></a></td><td>[EB02-010] Monkey.D.Luffy</td><td>49.91%</td><td>51.65%</td><td>5.02%</td><td>6,890</td><td>13,339</td></tr><tr><td>7</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-099?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-099.png" alt="OP03-099" class="leader-icon-ranking"></a></td><td>[OP03-099] Charlotte Katakuri</td><td>49.12%</td><td>52.89%</td><td>2.38%</td><td>3,349</td><td>6,332</td></tr><tr><td>8</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP09-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP09/OP09-001.png" alt="OP09-001" class="leader-icon-ranking"></a></td><td>[OP09-001] Shanks</td><td>47.88%</td><td>49.77%</td><td>3.66%</td><td>4,833</td><td>9,710</td></tr><tr><td>9</td><td class="trend positive">↑2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP10-099?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP10/OP10-099.png" alt="OP10-099" class="leader-icon-ranking"></a></td><td>[OP10-099] Eustass"Captain"Kid</td><td>47.23%</td><td>53.96%</td><td>1.56%</td><td>2,239</td><td>4,149</td></tr><tr><td>10</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP09-081?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP09/OP09-081.png" alt="OP09-081" class="leader-icon-ranking"></a></td><td>[OP09-081] Marshall.D.Teach</td><td>47.06%</td><td>48.45%</td><td>4.39%</td><td>5,645</td><td>11,651</td></tr><tr><td>11</td><td class="trend positive">↑2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP11-041?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP11/OP11-041.png" alt="OP11-041" class="leader-icon-ranking"></a></td><td>[OP11-041] Nami</td><td>46.73%</td><td>48.66%</td><td>3.11%</td><td>4,018</td><td>8,257</td></tr><tr><td>12</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP12-040?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP12/OP12-040.png" alt="OP12-040" class="leader-icon-ranking"></a></td><td>[OP12-040] Kuzan</td><td>46.68%</td><td>48.97%</td><td>2.71%</td><td>3,524</td><td>7,196</td></tr><tr><td>13</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP05-060?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP05/OP05-060.png" alt="OP05-060" class="leader-icon-ranking"></a></td><td>[OP05-060] Monkey.D.Luffy</td><td>46.40%</td><td>50.37%</td><td>1.92%</td><td>2,575</td><td>5,112</td></tr><tr><td>14</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP09-022?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP09/OP09-022.png" alt="OP09-022" class="leader-icon-ranking"></a></td><td>[OP09-022] Lim</td><td>45.85%</td><td>51.87%</td><td>1.54%</td><td>2,123</td><td>4,093</td></tr><tr><td>15</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP08-098?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP08/OP08-098.png" alt="OP08-098" class="leader-icon-ranking"></a></td><td>[OP08-098] Kalgara</td><td>44.72%</td><td>49.95%</td><td>1.55%</td><td>2,051</td><td>4,106</td></tr><tr><td>16</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP06-022?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP06/OP06-022.png" alt="OP06-022" class="leader-icon-ranking"></a></td><td>[OP06-022] Yamato</td><td>44.52%</td><td>47.11%</td><td>2.06%</td><td>2,579</td><td>5,475</td></tr><tr><td>17</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP12-081?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP12/OP12-081.png" alt="OP12-081" class="leader-icon-ranking"></a></td><td>[OP12-081] Koala</td><td>44.30%</td><td>48.91%</td><td>1.59%</td><td>2,064</td><td>4,220</td></tr><tr><td>18</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP10-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP10/OP10-001.png" alt="OP10-001" class="leader-icon-ranking"></a></td><td>[OP10-001] Smoker</td><td>43.81%</td><td>49.87%</td><td>1.40%</td><td>1,848</td><td>3,706</td></tr><tr><td>19</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP12-041?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP12/OP12-041.png" alt="OP12-041" class="leader-icon-ranking"></a></td><td>[OP12-041] Sanji</td><td>42.64%</td><td>44.38%</td><td>2.04%</td><td>2,409</td><td>5,428</td></tr><tr><td>20</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP07-079?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP07/OP07-079.png" alt="OP07-079" class="leader-icon-ranking"></a></td><td>[OP07-079] Rob Lucci</td><td>40.59%</td><td>48.59%</td><td>1.10%</td><td>1,413</td><td>2,908</td></tr><tr><td>21</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP09-061?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP09/OP09-061.png" alt="OP09-061" class="leader-icon-ranking"></a></td><td>[OP09-061] Monkey.D.Luffy</td><td>39.40%</td><td>45.24%</td><td>1.14%</td><td>1,372</td><td>3,033</td></tr><tr><td>22</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP09-042?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP09/OP09-042.png" alt="OP09-042" class="leader-icon-ranking"></a></td><td>[OP09-042] Buggy</td><td>36.81%</td><td>48.24%</td><td>0.84%</td><td>1,071</td><td>2,220</td></tr><tr><td>23</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP04-019?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP04/OP04-019.png" alt="OP04-019" class="leader-icon-ranking"></a></td><td>[OP04-019] Donquixote Doflamingo</td><td>36.48%</td><td>45.30%</td><td>0.89%</td><td>1,069</td><td>2,360</td></tr><tr><td>24</td><td class="trend positive">↑2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP05-041?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP05/OP05-041.png" alt="OP05-041" class="leader-icon-ranking"></a></td><td>[OP05-041] Sakazuki</td><td>35.23%</td><td>42.72%</td><td>0.88%</td><td>994</td><td>2,327</td></tr><tr><td>25</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP06-042?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP06/OP06-042.png" alt="OP06-042" class="leader-icon-ranking"></a></td><td>[OP06-042] Vinsmoke Reiju</td><td>35.17%</td><td>45.77%</td><td>0.80%</td><td>969</td><td>2,117</td></tr><tr><td>26</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP05-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP05/OP05-002.png" alt="OP05-002" class="leader-icon-ranking"></a></td><td>[OP05-002] Belo Betty</td><td>34.91%</td><td>49.89%</td><td>0.71%</td><td>945</td><td>1,894</td></tr><tr><td>27</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST22-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST22/ST22-001.png" alt="ST22-001" class="leader-icon-ranking"></a></td><td>[ST22-001] Ace &amp; Newgate</td><td>33.38%</td><td>42.58%</td><td>0.76%</td><td>863</td><td>2,027</td></tr><tr><td>28</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP09-062?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP09/OP09-062.png" alt="OP09-062" class="leader-icon-ranking"></a></td><td>[OP09-062] Nico Robin</td><td>32.39%</td><td>42.99%</td><td>0.70%</td><td>804</td><td>1,870</td></tr><tr><td>29</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP05-022?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP05/OP05-022.png" alt="OP05-022" class="leader-icon-ranking"></a></td><td>[OP05-022] Donquixote Rosinante</td><td>31.27%</td><td>48.91%</td><td>0.59%</td><td>760</td><td>1,554</td></tr><tr><td>30</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP10-022?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP10/OP10-022.png" alt="OP10-022" class="leader-icon-ranking"></a></td><td>[OP10-022] Trafalgar Law</td><td>31.14%</td><td>46.60%</td><td>0.60%</td><td>747</td><td>1,603</td></tr><tr><td>31</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP07-097?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP07/OP07-097.png" alt="OP07-097" class="leader-icon-ranking"></a></td><td>[OP07-097] Vegapunk</td><td>30.97%</td><td>44.78%</td><td>0.62%</td><td>734</td><td>1,639</td></tr><tr><td>32</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP08-058?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP08/OP08-058.png" alt="OP08-058" class="leader-icon-ranking"></a></td><td>[OP08-058] Charlotte Pudding</td><td>29.36%</td><td>45.08%</td><td>0.55%</td><td>664</td><td>1,473</td></tr><tr><td>33</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST12-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST12/ST12-001.png" alt="ST12-001" class="leader-icon-ranking"></a></td><td>[ST12-001] Roronoa Zoro &amp; Sanji</td><td>29.01%</td><td>42.96%</td><td>0.56%</td><td>641</td><td>1,492</td></tr><tr><td>34</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-001.png" alt="OP01-001" class="leader-icon-ranking"></a></td><td>[OP01-001] Roronoa Zoro</td><td>28.05%</td><td>52.22%</td><td>0.47%</td><td>646</td><td>1,237</td></tr><tr><td>35</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP08-021?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP08/OP08-021.png" alt="OP08-021" class="leader-icon-ranking"></a></td><td>[OP08-021] Carrot</td><td>25.14%</td><td>44.77%</td><td>0.43%</td><td>509</td><td>1,137</td></tr><tr><td>36</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP08-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP08/OP08-002.png" alt="OP08-002" class="leader-icon-ranking"></a></td><td>[OP08-002] Marco</td><td>24.23%</td><td>41.00%</td><td>0.42%</td><td>460</td><td>1,122</td></tr><tr><td>37</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-060?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-060.png" alt="OP01-060" class="leader-icon-ranking"></a></td><td>[OP01-060] Donquixote Doflamingo</td><td>24.16%</td><td>45.21%</td><td>0.40%</td><td>481</td><td>1,064</td></tr><tr><td>38</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP08-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP08/OP08-001.png" alt="OP08-001" class="leader-icon-ranking"></a></td><td>[OP08-001] Tony Tony.Chopper</td><td>23.19%</td><td>44.26%</td><td>0.38%</td><td>447</td><td>1,010</td></tr><tr><td>39</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-022?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-022.png" alt="OP03-022" class="leader-icon-ranking"></a></td><td>[OP03-022] Arlong</td><td>22.39%</td><td>45.11%</td><td>0.36%</td><td>429</td><td>951</td></tr><tr><td>40</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP10-042?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP10/OP10-042.png" alt="OP10-042" class="leader-icon-ranking"></a></td><td>[OP10-042] Usopp</td><td>20.98%</td><td>42.34%</td><td>0.33%</td><td>376</td><td>888</td></tr><tr><td>41</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST10-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST10/ST10-002.png" alt="ST10-002" class="leader-icon-ranking"></a></td><td>[ST10-002] Monkey.D.Luffy</td><td>18.53%</td><td>42.11%</td><td>0.28%</td><td>315</td><td>748</td></tr><tr><td>42</td><td class="trend positive">↑2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP10-003?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP10/OP10-003.png" alt="OP10-003" class="leader-icon-ranking"></a></td><td>[OP10-003] Sugar</td><td>17.76%</td><td>43.22%</td><td>0.26%</td><td>303</td><td>701</td></tr><tr><td>43</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP11-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP11/OP11-001.png" alt="OP11-001" class="leader-icon-ranking"></a></td><td>[OP11-001] Koby</td><td>17.65%</td><td>40.68%</td><td>0.27%</td><td>288</td><td>708</td></tr><tr><td>44</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP11-022?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP11/OP11-022.png" alt="OP11-022" class="leader-icon-ranking"></a></td><td>[OP11-022] Shirahoshi</td><td>17.06%</td><td>36.19%</td><td>0.26%</td><td>253</td><td>699</td></tr><tr><td>45</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST21-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST21/ST21-001.png" alt="ST21-001" class="leader-icon-ranking"></a></td><td>[ST21-001] Monkey.D.Luffy</td><td>16.44%</td><td>43.90%</td><td>0.24%</td><td>277</td><td>631</td></tr><tr><td>46</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP11-021?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP11/OP11-021.png" alt="OP11-021" class="leader-icon-ranking"></a></td><td>[OP11-021] Jinbe</td><td>16.09%</td><td>46.28%</td><td>0.23%</td><td>280</td><td>605</td></tr><tr><td>47</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST13-003?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST13/ST13-003.png" alt="ST13-003" class="leader-icon-ranking"></a></td><td>[ST13-003] Monkey.D.Luffy</td><td>14.80%</td><td>39.33%</td><td>0.21%</td><td>223</td><td>567</td></tr><tr><td>48</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP11-062?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP11/OP11-062.png" alt="OP11-062" class="leader-icon-ranking"></a></td><td>[OP11-062] Charlotte Katakuri</td><td>14.58%</td><td>44.10%</td><td>0.20%</td><td>239</td><td>542</td></tr><tr><td>49</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP07-038?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP07/OP07-038.png" alt="OP07-038" class="leader-icon-ranking"></a></td><td>[OP07-038] Boa Hancock</td><td>14.13%</td><td>37.34%</td><td>0.20%</td><td>202</td><td>541</td></tr><tr><td>50</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/EB01-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/EB01/EB01-001.png" alt="EB01-001" class="leader-icon-ranking"></a></td><td>[EB01-001] Kouzuki Oden</td><td>12.85%</td><td>47.92%</td><td>0.17%</td><td>219</td><td>457</td></tr><tr><td>51</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP04-058?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP04/OP04-058.png" alt="OP04-058" class="leader-icon-ranking"></a></td><td>[OP04-058] Crocodile</td><td>11.28%</td><td>37.65%</td><td>0.15%</td><td>154</td><td>409</td></tr><tr><td>52</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/PRB01-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/PRB01/PRB01-001.png" alt="PRB01-001" class="leader-icon-ranking"></a></td><td>[PRB01-001] Sanji</td><td>10.79%</td><td>38.86%</td><td>0.15%</td><td>150</td><td>386</td></tr><tr><td>53</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST13-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST13/ST13-002.png" alt="ST13-002" class="leader-icon-ranking"></a></td><td>[ST13-002] Portgas.D.Ace</td><td>10.65%</td><td>38.95%</td><td>0.14%</td><td>148</td><td>380</td></tr><tr><td>54</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP07-059?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP07/OP07-059.png" alt="OP07-059" class="leader-icon-ranking"></a></td><td>[OP07-059] Foxy</td><td>9.13%</td><td>41.90%</td><td>0.12%</td><td>132</td><td>315</td></tr><tr><td>55</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST11-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST11/ST11-001.png" alt="ST11-001" class="leader-icon-ranking"></a></td><td>[ST11-001] Uta</td><td>9.01%</td><td>47.54%</td><td>0.11%</td><td>145</td><td>305</td></tr><tr><td>56</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST13-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST13/ST13-001.png" alt="ST13-001" class="leader-icon-ranking"></a></td><td>[ST13-001] Sabo</td><td>8.48%</td><td>40.55%</td><td>0.11%</td><td>118</td><td>291</td></tr><tr><td>57</td><td class="trend positive">↑4 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP06-080?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP06/OP06-080.png" alt="OP06-080" class="leader-icon-ranking"></a></td><td>[OP06-080] Gecko Moria</td><td>8.09%</td><td>34.16%</td><td>0.11%</td><td>96</td><td>281</td></tr><tr><td>58</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-062?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-062.png" alt="OP01-062" class="leader-icon-ranking"></a></td><td>[OP01-062] Crocodile</td><td>7.93%</td><td>27.50%</td><td>0.11%</td><td>77</td><td>280</td></tr><tr><td>59</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST10-003?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST10/ST10-003.png" alt="ST10-003" class="leader-icon-ranking"></a></td><td>[ST10-003] Eustass"Captain"Kid</td><td>7.71%</td><td>42.69%</td><td>0.10%</td><td>111</td><td>260</td></tr><tr><td>60</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP07-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP07/OP07-001.png" alt="OP07-001" class="leader-icon-ranking"></a></td><td>[OP07-001] Monkey.D.Dragon</td><td>7.69%</td><td>34.34%</td><td>0.10%</td><td>91</td><td>265</td></tr><tr><td>61</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-002.png" alt="OP01-002" class="leader-icon-ranking"></a></td><td>[OP01-002] Trafalgar Law</td><td>6.90%</td><td>53.33%</td><td>0.08%</td><td>120</td><td>225</td></tr><tr><td>62</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST14-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST14/ST14-001.png" alt="ST14-001" class="leader-icon-ranking"></a></td><td>[ST14-001] Monkey.D.Luffy</td><td>6.78%</td><td>42.04%</td><td>0.09%</td><td>95</td><td>226</td></tr><tr><td>63</td><td class="trend negative">↓3 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-093?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-093.png" alt="OP02-093" class="leader-icon-ranking"></a></td><td>[OP02-093] Smoker</td><td>6.72%</td><td>40.00%</td><td>0.08%</td><td>90</td><td>225</td></tr><tr><td>64</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-031?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-031.png" alt="OP01-031" class="leader-icon-ranking"></a></td><td>[OP01-031] Kouzuki Oden</td><td>5.52%</td><td>33.15%</td><td>0.07%</td><td>61</td><td>184</td></tr><tr><td>65</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST04-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST04/ST04-001.png" alt="ST04-001" class="leader-icon-ranking"></a></td><td>[ST04-001] Kaido</td><td>5.20%</td><td>30.64%</td><td>0.07%</td><td>53</td><td>173</td></tr><tr><td>66</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP08-057?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP08/OP08-057.png" alt="OP08-057" class="leader-icon-ranking"></a></td><td>[OP08-057] King</td><td>5.12%</td><td>28.65%</td><td>0.06%</td><td>49</td><td>171</td></tr><tr><td>67</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP12-061?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP12/OP12-061.png" alt="OP12-061" class="leader-icon-ranking"></a></td><td>[OP12-061] Donquixote Rosinante</td><td>4.54%</td><td>28.67%</td><td>0.06%</td><td>43</td><td>150</td></tr><tr><td>68</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP05-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP05/OP05-001.png" alt="OP05-001" class="leader-icon-ranking"></a></td><td>[OP05-001] Sabo</td><td>4.00%</td><td>39.53%</td><td>0.05%</td><td>51</td><td>129</td></tr><tr><td>69</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP10-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP10/OP10-002.png" alt="OP10-002" class="leader-icon-ranking"></a></td><td>[OP10-002] Caesar Clown</td><td>3.98%</td><td>24.43%</td><td>0.05%</td><td>32</td><td>131</td></tr><tr><td>70</td><td class="trend positive">↑2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP04-039?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP04/OP04-039.png" alt="OP04-039" class="leader-icon-ranking"></a></td><td>[OP04-039] Rebecca</td><td>3.88%</td><td>32.54%</td><td>0.05%</td><td>41</td><td>126</td></tr><tr><td>71</td><td class="trend negative">↓3 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST07-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST07/ST07-001.png" alt="ST07-001" class="leader-icon-ranking"></a></td><td>[ST07-001] Charlotte Linlin</td><td>3.61%</td><td>46.09%</td><td>0.04%</td><td>53</td><td>115</td></tr><tr><td>72</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-001.png" alt="OP02-001" class="leader-icon-ranking"></a></td><td>[OP02-001] Edward.Newgate</td><td>3.45%</td><td>42.73%</td><td>0.04%</td><td>47</td><td>110</td></tr><tr><td>73</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP04-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP04/OP04-001.png" alt="OP04-001" class="leader-icon-ranking"></a></td><td>[OP04-001] Nefeltari Vivi</td><td>2.87%</td><td>30.43%</td><td>0.03%</td><td>28</td><td>92</td></tr><tr><td>74</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-002?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-002.png" alt="OP02-002" class="leader-icon-ranking"></a></td><td>[OP02-002] Monkey.D.Garp</td><td>2.52%</td><td>33.75%</td><td>0.03%</td><td>27</td><td>80</td></tr><tr><td>75</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP04-040?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP04/OP04-040.png" alt="OP04-040" class="leader-icon-ranking"></a></td><td>[OP04-040] Queen</td><td>2.35%</td><td>24.00%</td><td>0.03%</td><td>18</td><td>75</td></tr><tr><td>76</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-021?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-021.png" alt="OP03-021" class="leader-icon-ranking"></a></td><td>[OP03-021] Kuro</td><td>2.32%</td><td>21.62%</td><td>0.03%</td><td>16</td><td>74</td></tr><tr><td>77</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP06-021?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP06/OP06-021.png" alt="OP06-021" class="leader-icon-ranking"></a></td><td>[OP06-021] Perona</td><td>1.99%</td><td>22.22%</td><td>0.02%</td><td>14</td><td>63</td></tr><tr><td>78</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-003?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-003.png" alt="OP01-003" class="leader-icon-ranking"></a></td><td>[OP01-003] Monkey.D.Luffy</td><td>1.98%</td><td>40.32%</td><td>0.02%</td><td>25</td><td>62</td></tr><tr><td>79</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST01-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST01/ST01-001.png" alt="ST01-001" class="leader-icon-ranking"></a></td><td>[ST01-001] Monkey.D.Luffy</td><td>1.88%</td><td>32.20%</td><td>0.02%</td><td>19</td><td>59</td></tr><tr><td>80</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP06-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP06/OP06-001.png" alt="OP06-001" class="leader-icon-ranking"></a></td><td>[OP06-001] Uta</td><td>1.81%</td><td>28.07%</td><td>0.02%</td><td>16</td><td>57</td></tr><tr><td>81</td><td class="trend positive">↑3 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-001.png" alt="OP03-001" class="leader-icon-ranking"></a></td><td>[OP03-001] Portgas.D.Ace</td><td>1.74%</td><td>23.64%</td><td>0.02%</td><td>13</td><td>55</td></tr><tr><td>82</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP04-020?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP04/OP04-020.png" alt="OP04-020" class="leader-icon-ranking"></a></td><td>[OP04-020] Issho</td><td>1.52%</td><td>14.58%</td><td>0.02%</td><td>7</td><td>48</td></tr><tr><td>83</td><td class="trend negative">↓3 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP06-020?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP06/OP06-020.png" alt="OP06-020" class="leader-icon-ranking"></a></td><td>[OP06-020] Hody Jones</td><td>1.42%</td><td>45.45%</td><td>0.02%</td><td>20</td><td>44</td></tr><tr><td>84</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/EB01-021?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/EB01/EB01-021.png" alt="EB01-021" class="leader-icon-ranking"></a></td><td>[EB01-021] Hannyabal</td><td>1.35%</td><td>30.95%</td><td>0.02%</td><td>13</td><td>42</td></tr><tr><td>85</td><td class="trend positive">↑2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST09-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST09/ST09-001.png" alt="ST09-001" class="leader-icon-ranking"></a></td><td>[ST09-001] Yamato</td><td>1.23%</td><td>47.37%</td><td>0.01%</td><td>18</td><td>38</td></tr><tr><td>86</td><td class="trend negative">↓3 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/EB01-040?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/EB01/EB01-040.png" alt="EB01-040" class="leader-icon-ranking"></a></td><td>[EB01-040] Kyros</td><td>1.16%</td><td>27.78%</td><td>0.01%</td><td>10</td><td>36</td></tr><tr><td>87</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/P-117?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/P/P-117.png" alt="P-117" class="leader-icon-ranking"></a></td><td>[P-117] Nami</td><td>1.06%</td><td>27.27%</td><td>0.01%</td><td>9</td><td>33</td></tr><tr><td>88</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-049?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-049.png" alt="OP02-049" class="leader-icon-ranking"></a></td><td>[OP02-049] Emporio.Ivankov</td><td>0.87%</td><td>25.93%</td><td>0.01%</td><td>7</td><td>27</td></tr><tr><td>89</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-077?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-077.png" alt="OP03-077" class="leader-icon-ranking"></a></td><td>[OP03-077] Charlotte Linlin</td><td>0.65%</td><td>25.00%</td><td>0.01%</td><td>5</td><td>20</td></tr><tr><td>90</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST02-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST02/ST02-001.png" alt="ST02-001" class="leader-icon-ranking"></a></td><td>[ST02-001] Eustass"Captain"Kid</td><td>0.58%</td><td>38.89%</td><td>0.01%</td><td>7</td><td>18</td></tr><tr><td>91</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-058?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-058.png" alt="OP03-058" class="leader-icon-ranking"></a></td><td>[OP03-058] Iceburg</td><td>0.58%</td><td>33.33%</td><td>0.01%</td><td>6</td><td>18</td></tr><tr><td>92</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-071?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-071.png" alt="OP02-071" class="leader-icon-ranking"></a></td><td>[OP02-071] Magellan</td><td>0.52%</td><td>12.50%</td><td>0.01%</td><td>2</td><td>16</td></tr><tr><td>93</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-061?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-061.png" alt="OP01-061" class="leader-icon-ranking"></a></td><td>[OP01-061] Kaido</td><td>0.45%</td><td>14.29%</td><td>0.01%</td><td>2</td><td>14</td></tr><tr><td>94</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST03-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST03/ST03-001.png" alt="ST03-001" class="leader-icon-ranking"></a></td><td>[ST03-001] Crocodile</td><td>0.33%</td><td>90.00%</td><td>0.00%</td><td>9</td><td>10</td></tr><tr><td>95</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-040?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-040.png" alt="OP03-040" class="leader-icon-ranking"></a></td><td>[OP03-040] Nami</td><td>0.29%</td><td>22.22%</td><td>0.00%</td><td>2</td><td>9</td></tr><tr><td>96</td><td class="trend positive">↑5 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-072?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-072.png" alt="OP02-072" class="leader-icon-ranking"></a></td><td>[OP02-072] Zephyr</td><td>0.29%</td><td>11.11%</td><td>0.00%</td><td>1</td><td>9</td></tr><tr><td>97</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/P-047?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/P/P-047.png" alt="P-047" class="leader-icon-ranking"></a></td><td>[P-047] Monkey.D.Luffy</td><td>0.26%</td><td>37.50%</td><td>0.00%</td><td>3</td><td>8</td></tr><tr><td>98</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST05-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST05/ST05-001.png" alt="ST05-001" class="leader-icon-ranking"></a></td><td>[ST05-001] Shanks</td><td>0.26%</td><td>25.00%</td><td>0.00%</td><td>2</td><td>8</td></tr><tr><td>99</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/P-011?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/P/P-011.png" alt="P-011" class="leader-icon-ranking"></a></td><td>[P-011] Uta</td><td>0.23%</td><td>57.14%</td><td>0.00%</td><td>4</td><td>7</td></tr><tr><td>100</td><td class="trend negative">↓3 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-026?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-026.png" alt="OP02-026" class="leader-icon-ranking"></a></td><td>[OP02-026] Sanji</td><td>0.20%</td><td>33.33%</td><td>0.00%</td><td>2</td><td>6</td></tr><tr><td>101</td><td class="trend negative">↓1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST06-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST06/ST06-001.png" alt="ST06-001" class="leader-icon-ranking"></a></td><td>[ST06-001] Sakazuki</td><td>0.16%</td><td>20.00%</td><td>0.00%</td><td>1</td><td>5</td></tr><tr><td>102</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP01-091?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP01/OP01-091.png" alt="OP01-091" class="leader-icon-ranking"></a></td><td>[OP01-091] King</td><td>0.10%</td><td>33.33%</td><td>0.00%</td><td>1</td><td>3</td></tr><tr><td>103</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP03-076?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP03/OP03-076.png" alt="OP03-076" class="leader-icon-ranking"></a></td><td>[OP03-076] Rob Lucci</td><td>0.07%</td><td>50.00%</td><td>0.00%</td><td>1</td><td>2</td></tr><tr><td>104</td><td class="trend positive">↑1 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/OP02-025?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/OP02/OP02-025.png" alt="OP02-025" class="leader-icon-ranking"></a></td><td>[OP02-025] Kin'emon</td><td>0.07%</td><td>50.00%</td><td>0.00%</td><td>1</td><td>2</td></tr><tr><td>105</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/P-076?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/P/P-076.png" alt="P-076" class="leader-icon-ranking"></a></td><td>[P-076] Sakazuki</td><td>0.07%</td><td>50.00%</td><td>0.00%</td><td>1</td><td>2</td></tr><tr><td>106</td><td class="trend negative">↓2 </td><td class="ranking-leader-cell"><a href="/matchhistory/stats/P-086?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/P/P-086.png" alt="P-086" class="leader-icon-ranking"></a></td><td>[P-086] Trafalgar Law</td><td>0.07%</td><td>0.00%</td><td>0.00%</td><td>0</td><td>2</td></tr><tr><td>107</td><td class="trend ">—</td><td class="ranking-leader-cell"><a href="/matchhistory/stats/ST08-001?period=lw_p"><img src="https://cdn.cardkaizoku.com/cards_en/ST08/ST08-001.png" alt="ST08-001" class="leader-icon-ranking"></a></td><td>[ST08-001] Monkey.D.Luffy</td><td>0.03%</td><td>100.00%</td><td>0.00%</td><td>1</td><td>1</td></tr></tbody></table>
      <!-- END USER DATA TABLE -->
    </template>
  </main>

  <script>
    // Everything initializes after DOM is ready to avoid null element errors.
    document.addEventListener('DOMContentLoaded', () => {
      // Utility: Parse percentage like "7.36%" -> 7.36
      const pct = (s) => parseFloat(String(s).replace(/[^\d.]/g, '')) || 0;

      function extractLeaders() {
        const tpl = document.getElementById('dataTableTemplate');
        const table = tpl.content.querySelector('table.stats-table');
        const rows = Array.from(table.querySelectorAll('tbody tr'));
        const leaders = rows.map(tr => {
          const tds = tr.querySelectorAll('td');
          const rank = parseInt(tds[0].textContent.trim(), 10);
          const img = tds[2].querySelector('img');
          const leader = tds[3].textContent.trim();
          const playRate = pct(tds[6].textContent.trim());
          const imgSrc = img ? img.getAttribute('src') : null;
          return { rank, leader, playRate, imgSrc };
        }).filter(x => x.leader && x.playRate > 0);
        return leaders;
      }

      // Normalize to weights that sum to 1
      function normalizeWeights(arr) {
        const total = arr.reduce((s, v) => s + v, 0) || 1;
        return arr.map(v => v / total);
      }

      // Compute base weights (by play rate)
      function baseWeights(leaders) {
        return normalizeWeights(leaders.map(l => l.playRate));
      }

      // Round-aware weight adjustment for "Phase out Rogues"
      // New behavior: slider directly represents the **target late-round exponent α ∈ [1.05, 1.50]**.
      // We ease from α=1.00 on round 1 up to α_target on the last round using t^1.5.
      function roundWeights(leaders, roundIndex, totalRounds, enabled, alphaTarget) {
        const base = baseWeights(leaders);
        if (!enabled) return base;
        const eps = 1e-9;
        const t = totalRounds > 1 ? (roundIndex - 1) / (totalRounds - 1) : 1; // 0..1
        const aT = Math.min(1.5, Math.max(1.05, Number(alphaTarget) || 1.25));
        const alpha = 1 + (aT - 1) * Math.pow(t, 1.5); // 1.00 → aT across rounds
        const raised = base.map(w => Math.pow(w + eps, alpha));
        return normalizeWeights(raised);
      }

      function weightedPickWithWeights(leaders, weights) {
        const r = Math.random();
        let acc = 0;
        for (let i = 0; i < leaders.length; i++) {
          acc += weights[i];
          if (r <= acc) return leaders[i];
        }
        return leaders[leaders.length - 1];
      }

      function d6() { return Math.floor(Math.random() * 6) + 1; }

      // simulate: opts.rollFn (test hook), opts.phaseOut (bool), opts.alpha (target exponent)
      function simulate(rounds, myLeaderText, preferred, opts = {}) {
        const leaders = extractLeaders();
        const results = [];
        const rollFn = typeof opts.rollFn === 'function' ? opts.rollFn : d6;
        const phaseOut = !!opts.phaseOut;
        const alphaTarget = Number(opts.alpha) || 1.25;
        for (let i = 1; i <= rounds; i++) {
          const weights = roundWeights(leaders, i, rounds, phaseOut, alphaTarget);
          const opp = weightedPickWithWeights(leaders, weights);
          const roll = rollFn();
          const youStart = (roll % 2 === 1) ? (preferred || 'First') : ((preferred === 'First') ? 'Second' : 'First');
          const mirror = myLeaderText && opp.leader.toLowerCase().includes(myLeaderText.toLowerCase());
          results.push({ round: i, ...opp, roll, youStart, mirror });
        }
        return results;
      }

      function render(results) {
        const tbody = document.querySelector('#resultTable tbody');
        tbody.innerHTML = '';
        let firsts = 0, seconds = 0, mirrors = 0;
        results.forEach(r => {
          const tr = document.createElement('tr');
          const roundCell = document.createElement('td');
          roundCell.textContent = String(r.round);

          const oppCell = document.createElement('td');
          oppCell.innerHTML = `
            <div class="leader">
              ${r.imgSrc ? `<img src="${r.imgSrc}" alt="">` : ''}
              <div>
                <div style="font-weight:600">${r.leader.replace(/\[(.*?)\]\s*/, '')}</div>
                ${r.mirror ? '<div><span class="tag ok">Mirror</span></div>' : ''}
              </div>
            </div>`;

          const rankCell = document.createElement('td');
          rankCell.innerHTML = `<span class="rank">#${r.rank}</span>`;

          const prCell = document.createElement('td');
          prCell.textContent = r.playRate.toFixed(2) + '%';

          const dieCell = document.createElement('td');
          dieCell.innerHTML = `<span class="tag ${r.roll % 2 === 1 ? 'ok' : 'bad'}">d6 = ${r.roll}</span>`;

          const youCell = document.createElement('td');
          youCell.innerHTML = r.youStart === 'First' ? '<span class="tag ok">First</span>' : '<span class="tag bad">Second</span>';

          if (r.youStart === 'First') firsts++; else seconds++;
          if (r.mirror) mirrors++;

          tr.append(roundCell, oppCell, rankCell, prCell, dieCell, youCell);
          tbody.appendChild(tr);
        });

        const chips = document.getElementById('summaryChips');
        chips.innerHTML = '';
        const mk = (label) => { const s = document.createElement('div'); s.className='chip'; s.textContent = label; return s; };
        chips.append(mk(`First: ${firsts}`), mk(`Second: ${seconds}`), mk(`Mirrors: ${mirrors}`));
      }

      function toCSV(results) {
        const header = ['Round','Leader','Rank','PlayRate','Die','You'];
        const rows = results.map(r => [r.round, r.leader, `#${r.rank}`, r.playRate.toFixed(2)+'%', r.roll, r.youStart]);
        return [header, ...rows].map(r => r.map(x => '"' + String(x).replace(/"/g,'""') + '"').join(',')).join('\n');
      }

      // --- Event wiring (safe after DOMContentLoaded) ---
      let lastResults = [];
      const btnSim = document.getElementById('btnSim');
      const btnCsv = document.getElementById('btnCsv');
      const btnTests = document.getElementById('btnTests');
      const phaseCheckbox = document.getElementById('phaseOut');
      const phaseSlider = document.getElementById('phaseSlider');
      const phaseValue = document.getElementById('phaseValue');

      function syncPhaseUI() {
        phaseSlider.disabled = !phaseCheckbox.checked;
        // Clamp and show with two decimals
        let val = Number(phaseSlider.value);
        if (isNaN(val)) val = 1.25;
        val = Math.min(1.5, Math.max(1.05, val));
        phaseSlider.value = String(val);
        phaseValue.textContent = `α = ${val.toFixed(2)}`;
        phaseValue.style.opacity = phaseCheckbox.checked ? '1' : '0.5';
      }
      phaseCheckbox.addEventListener('change', syncPhaseUI);
      phaseSlider.addEventListener('input', syncPhaseUI);
      syncPhaseUI();

      btnSim.addEventListener('click', () => {
        const rounds = parseInt(document.getElementById('rounds').value, 10) || 10;
        const myLeader = document.getElementById('myLeader').value.trim();
        const preferred = document.getElementById('prefStart').value;
        const phaseOut = phaseCheckbox.checked;
        const alphaTarget = Number(phaseSlider.value) || 1.25; // α ∈ [1.05, 1.50]
        lastResults = simulate(rounds, myLeader, preferred, { phaseOut, alpha: alphaTarget });
        render(lastResults);
      });

      btnCsv.addEventListener('click', () => {
        if (!lastResults.length) { alert('Run a simulation first.'); return; }
        const csv = toCSV(lastResults);
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'onepiece_tournament_sim.csv'; a.click();
        URL.revokeObjectURL(url);
      });

      // --- Minimal self-tests ---
      function runTests() {
        const out = [];
        function assert(name, cond) { out.push(`${cond ? '✅' : '❌'} ${name}`); return !!cond; }

        // Test 1: DOM elements exist
        assert('btnSim exists', !!document.getElementById('btnSim'));
        assert('resultTable exists', !!document.getElementById('resultTable'));
        assert('phase slider exists', !!document.getElementById('phaseSlider'));

        // Test 2: parsing works
        const leaders = extractLeaders();
        assert('leaders parsed (>0)', leaders.length > 0);
        const base = baseWeights(leaders);
        const wsum = base.reduce((s, w) => s + w, 0);
        assert('weights sum to 1', Math.abs(wsum - 1) < 1e-9);

        // Test 3: weightedPick bias (synthetic)
        const fakeLeaders = [{leader:'A'},{leader:'B'}];
        const fakeWeights = [0.9, 0.1];
        let picksA = 0; for (let i=0;i<2000;i++){ if (weightedPickWithWeights(fakeLeaders, fakeWeights).leader==='A') picksA++; }
        assert('weightedPick prefers heavier weights', picksA > 1500);

        // Test 4: simulate parity rule (preferred First)
        const resOdd = simulate(1, '', 'First', { rollFn: () => 1 })[0];
        const resEven = simulate(1, '', 'First', { rollFn: () => 2 })[0];
        assert('odd roll -> Preferred', resOdd.youStart === 'First');
        assert('even roll -> Opposite', resEven.youStart === 'Second');

        // Test 5: simulate parity rule (preferred Second)
        const rOdd2 = simulate(1, '', 'Second', { rollFn: () => 5 })[0];
        const rEven2 = simulate(1, '', 'Second', { rollFn: () => 4 })[0];
        assert('odd roll -> Preferred (Second)', rOdd2.youStart === 'Second');
        assert('even roll -> Opposite (First)', rEven2.youStart === 'First');

        // Test 6: phase-out strengthens top weight over rounds when α_target is larger
        const tiny = [{playRate:15, leader:'Top'},{playRate:3, leader:'Rogue'}];
        const early = roundWeights(tiny, 1, 10, true, 1.25);
        const lateWeak = roundWeights(tiny, 10, 10, true, 1.10);
        const lateStrong = roundWeights(tiny, 10, 10, true, 1.50);
        assert('lateStrong top > lateWeak top', lateStrong[0] > lateWeak[0]);
        assert('lateStrong rogue < lateWeak rogue', lateStrong[1] < lateWeak[1]);

        // Test 7: when phase-out disabled, weights stay the same across rounds
        const early2 = roundWeights(tiny, 1, 10, false, 1.50);
        const late2 = roundWeights(tiny, 10, 10, false, 1.50);
        assert('weights unchanged without phase-out (top)', Math.abs(early2[0] - late2[0]) < 1e-12);
        assert('weights unchanged without phase-out (rogue)', Math.abs(early2[1] - late2[1]) < 1e-12);

        const target = document.getElementById('testResults');
        target.innerHTML = out.map(line => `<div>${line}</div>`).join('');
        return out;
      }

      if (btnTests) btnTests.addEventListener('click', runTests);

      // Auto-run once on load for convenience
      btnSim.click();
    });
  </script>
</body>
</html>
